{% extends "base.html" %}
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% block title %}{% if LANGUAGE_CODE == 'ar' %}الموردون{% else %}Suppliers{% endif %}{% endblock %}
{% block page_title %}
  <h4 class="mb-0">{% if LANGUAGE_CODE == 'ar' %}الموردون{% else %}Suppliers{% endif %}</h4>
{% endblock %}
{% block content %}
<div class="container-fluid">
  <div class="card p-3 shadow-sm border-0 mb-3">
    <form method="get" class="d-flex gap-2" role="search">
      <input class="form-control" type="search" name="q" value="{{ q }}" placeholder="{% if LANGUAGE_CODE == 'ar' %}ابحث بالاسم/الإيميل/الهاتف{% else %}Search by name/email/phone{% endif %}">
      <button class="btn btn-primary">{% if LANGUAGE_CODE == 'ar' %}بحث{% else %}Search{% endif %}</button>
      {% if q %}<a class="btn btn-outline-secondary" href="{% url 'suppliers:list' %}">{% if LANGUAGE_CODE == 'ar' %}مسح{% else %}Clear{% endif %}</a>{% endif %}
    </form>
  </div>

  <div class="card p-0 shadow-sm border-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>#</th>
            <th>{% if LANGUAGE_CODE == 'ar' %}الاسم{% else %}Name{% endif %}</th>
            <th>Email</th>
            <th>{% if LANGUAGE_CODE == 'ar' %}الهاتف{% else %}Phone{% endif %}</th>
            <th>{% if LANGUAGE_CODE == 'ar' %}عدد المنتجات{% else %}Products{% endif %}</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for s in items %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ s.name }}</td>
            <td>{{ s.email|default:"—" }}</td>
            <td>{{ s.phone|default:"—" }}</td>
            <td>{{ s.products.count }}</td>
            <td class="text-end">
              <a class="btn btn-sm btn-outline-primary" href="{% url 'suppliers:detail' s.pk %}">
                {% if LANGUAGE_CODE == 'ar' %}تفاصيل{% else %}View{% endif %}
              </a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6" class="text-center text-muted py-4">
              {% if LANGUAGE_CODE == 'ar' %}لا توجد نتائج.{% else %}No suppliers found.{% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
